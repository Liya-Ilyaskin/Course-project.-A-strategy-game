–≤ –ª–µ–≤–æ–π –æ–±–ª–∞—Å—Ç–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å—Å—è –≤–æ–∑–º–æ–∂–Ω—ã–µ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–æ–µ–Ω–∏—è. 
–¥–ª—è –Ω–∞—á–∞–ª–∞ –ø—É—Å—Ç—å —ç—Ç–æ –±—É–¥–µ—Ç —Ä–∞—Ç—É—à–∞ –∑–∞–Ω–∏–º–∞—é—â–∞—è –ø—Ä–∏ –ø–æ—Å—Ç—Ä–æ–π–∫–µ 6 –∫–ª–µ—Ç–æ–∫. 
—Å–Ω–∞—á–∞–ª–∞ –Ω–∞–∂–∏–º–∞–µ—à—å –Ω–∞ –Ω–µ—ë –≤ –ª–µ–≤–æ–π –æ–±–ª–∞—Å—Ç–∏, 
–∑–∞—Ç–µ–º –≤—ã–±–∏—Ä–∞–µ—à—å –∫–ª–µ—Ç–∫—É –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤–µ—Ä—Ö–Ω–µ–π –ª–µ–≤–æ–π —É–≥–ª–æ–≤–æ–π –∫–ª–µ—Ç–∫–µ
—Ä–∞—Ç—É—à–∏(–∏–∑ 6 –∫–ª–µ—Ç–æ–∫) –∏ –ø—É—Å—Ç—å —Ä–∞—Ç—É—à–∞ –±—É–¥–µ—Ç –±–ª–µ–¥–Ω–æ –æ—Ä–∞–Ω–∂–µ–≤–∞—è –æ—Ä–∞–Ω–∂–µ–≤–∞—è. 
–ê –Ω–∏–∂–Ω—è—è –æ–±–ª–æ—Å—Ç—å –ø—É—Å—Ç—å –±—É–¥–µ—Ç –Ω–µ 30 –∞ 90

import pygame
import sys

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Pygame
pygame.init()

# –†–∞–∑–º–µ—Ä—ã –æ–∫–Ω–∞
SCREEN_WIDTH = 1200
SCREEN_HEIGHT = 800

# –°–æ–∑–¥–∞–Ω–∏–µ –æ–∫–Ω–∞
screen = pygame.display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))
pygame.display.set_caption("–î–µ—Ä–µ–≤–Ω—è - –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ")

# –¶–≤–µ—Ç–∞
BACKGROUND = (30, 30, 40)  # –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π —Ñ–æ–Ω
DIVIDER_COLOR = (100, 100, 120)  # –¶–≤–µ—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π
LEFT_PANEL_COLOR = (50, 60, 80)  # –¶–≤–µ—Ç –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏
RIGHT_PANEL_COLOR = (40, 50, 70)  # –¶–≤–µ—Ç –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏
BOTTOM_BAR_COLOR = (60, 70, 90)  # –¶–≤–µ—Ç –Ω–∏–∂–Ω–µ–π –ø–æ–ª–æ—Å–∫–∏
GRID_COLOR = (80, 90, 110)  # –¶–≤–µ—Ç —Å–µ—Ç–∫–∏

# –¶–≤–µ—Ç–∞ –¥–ª—è —Ä–µ—Å—É—Ä—Å–æ–≤
GOLD_COLOR = (255, 215, 0)  # –ó–æ–ª–æ—Ç–æ–π
POTION_COLOR = (0, 255, 0)   # –ó–µ–ª–µ–Ω—ã–π –¥–ª—è –∑–µ–ª–∏–π
POPULATION_COLOR = (200, 100, 255)  # –§–∏–æ–ª–µ—Ç–æ–≤—ã–π –¥–ª—è –∂–∏—Ç–µ–ª–µ–π
LEVEL_COLOR = (255, 100, 100)  # –ö—Ä–∞—Å–Ω—ã–π –¥–ª—è —É—Ä–æ–≤–Ω—è

# –¶–≤–µ—Ç–∞ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–∫
TOWN_HALL_COLOR = (255, 200, 150)  # –ë–ª–µ–¥–Ω–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π –¥–ª—è —Ä–∞—Ç—É—à–∏
TOWN_HALL_PREVIEW_COLOR = (255, 200, 150, 128)  # –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
BUTTON_COLOR = (70, 80, 100)  # –¶–≤–µ—Ç –∫–Ω–æ–ø–æ–∫
BUTTON_HOVER_COLOR = (90, 100, 120)  # –¶–≤–µ—Ç –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏

# –†–∞–∑–º–µ—Ä—ã –æ–±–ª–∞—Å—Ç–µ–π
BOTTOM_BAR_HEIGHT = 90  # –£–≤–µ–ª–∏—á–µ–Ω–∞ –≤—ã—Å–æ—Ç–∞ –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏
REMAINING_HEIGHT = SCREEN_HEIGHT - BOTTOM_BAR_HEIGHT
LEFT_PANEL_WIDTH = REMAINING_HEIGHT // 3  # 1/3 –æ—Å—Ç–∞–≤—à–µ–π—Å—è –≤—ã—Å–æ—Ç—ã –¥–ª—è —à–∏—Ä–∏–Ω—ã –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏
RIGHT_PANEL_WIDTH = SCREEN_WIDTH - LEFT_PANEL_WIDTH

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ç–∫–∏ –¥–ª—è –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏
GRID_CELL_SIZE = 40  # –†–∞–∑–º–µ—Ä –∫–ª–µ—Ç–∫–∏ –≤ –ø–∏–∫—Å–µ–ª—è—Ö

# –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
gold = 1000          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–æ–ª–æ—Ç–∞
potions = 5          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–µ–ª–∏–π
population = 42      # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–∏—Ç–µ–ª–µ–π
village_level = 3    # –£—Ä–æ–≤–µ–Ω—å –¥–µ—Ä–µ–≤–Ω–∏

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞
selected_building = None  # –í—ã–±—Ä–∞–Ω–Ω–æ–µ –∑–¥–∞–Ω–∏–µ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–π–∫–∏
buildings = []  # –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∑–¥–∞–Ω–∏–π

# –†–∞–∑–º–µ—Ä—ã –ø–æ—Å—Ç—Ä–æ–µ–∫ (–≤ –∫–ª–µ—Ç–∫–∞—Ö)
BUILDING_SIZES = {
    "town_hall": (3, 2)  # –†–∞—Ç—É—à–∞: 3 –∫–ª–µ—Ç–∫–∏ –≤ —à–∏—Ä–∏–Ω—É, 2 –≤ –≤—ã—Å–æ—Ç—É
}

# –°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ—Å—Ç—Ä–æ–µ–∫
BUILDING_COSTS = {
    "town_hall": {"gold": 500, "potions": 2}
}

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π –æ–±–ª–∞—Å—Ç–∏
left_panel_rect = pygame.Rect(0, 0, LEFT_PANEL_WIDTH, REMAINING_HEIGHT)
right_panel_rect = pygame.Rect(LEFT_PANEL_WIDTH, 0, RIGHT_PANEL_WIDTH, REMAINING_HEIGHT)
bottom_bar_rect = pygame.Rect(0, REMAINING_HEIGHT, SCREEN_WIDTH, BOTTOM_BAR_HEIGHT)

# –ö–Ω–æ–ø–∫–∏ –ø–æ—Å—Ç—Ä–æ–µ–∫ –≤ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏
building_buttons = {
    "town_hall": pygame.Rect(20, 100, LEFT_PANEL_WIDTH - 40, 60)
}

# –®—Ä–∏—Ñ—Ç—ã
font = pygame.font.Font(None, 36)
small_font = pygame.font.Font(None, 24)

def draw_grid(surface, rect, cell_size, color):
    """–û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–µ—Ç–∫–∏ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏"""
    start_x = rect.left
    start_y = rect.top
    end_x = rect.right
    end_y = rect.bottom
    
    # –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏
    for x in range(start_x, end_x, cell_size):
        pygame.draw.line(surface, color, (x, start_y), (x, end_y), 1)
    
    # –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏
    for y in range(start_y, end_y, cell_size):
        pygame.draw.line(surface, color, (start_x, y), (end_x, y), 1)

def draw_buildings():
    """–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤—Å–µ—Ö –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∑–¥–∞–Ω–∏–π"""
    for building in buildings:
        name, grid_x, grid_y = building
        width, height = BUILDING_SIZES[name]
        
        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–µ—Ç–∫–∏ –≤ –ø–∏–∫—Å–µ–ª–∏
        pixel_x = right_panel_rect.left + grid_x * GRID_CELL_SIZE
        pixel_y = right_panel_rect.top + grid_y * GRID_CELL_SIZE
        pixel_width = width * GRID_CELL_SIZE
        pixel_height = height * GRID_CELL_SIZE
        
        # –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∑–¥–∞–Ω–∏–µ
        if name == "town_hall":
            pygame.draw.rect(screen, TOWN_HALL_COLOR, (pixel_x, pixel_y, pixel_width, pixel_height))
            # –û–±–≤–æ–¥–∫–∞ –∑–¥–∞–Ω–∏—è
            pygame.draw.rect(screen, (200, 150, 100), (pixel_x, pixel_y, pixel_width, pixel_height), 2)
            
            # –ù–∞–∑–≤–∞–Ω–∏–µ –∑–¥–∞–Ω–∏—è
            name_text = small_font.render("–†–∞—Ç—É—à–∞", True, (0, 0, 0))
            screen.blit(name_text, (pixel_x + 10, pixel_y + 10))

def draw_building_preview(mouse_pos):
    """–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–¥–∞–Ω–∏—è –ø—Ä–∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–µ"""
    if selected_building:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫—É—Ä—Å–æ—Ä –≤ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏
        if (right_panel_rect.left <= mouse_pos[0] <= right_panel_rect.right and
            right_panel_rect.top <= mouse_pos[1] <= right_panel_rect.bottom):
            
            # –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–µ—Ç–∫–∏
            grid_x = (mouse_pos[0] - right_panel_rect.left) // GRID_CELL_SIZE
            grid_y = (mouse_pos[1] - right_panel_rect.top) // GRID_CELL_SIZE
            
            width, height = BUILDING_SIZES[selected_building]
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–¥–∞–Ω–∏–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ –≥—Ä–∞–Ω–∏—Ü—ã
            if (grid_x + width <= (right_panel_rect.width // GRID_CELL_SIZE) and
                grid_y + height <= (right_panel_rect.height // GRID_CELL_SIZE)):
                
                # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–µ—Ç–∫–∏ –≤ –ø–∏–∫—Å–µ–ª–∏
                pixel_x = right_panel_rect.left + grid_x * GRID_CELL_SIZE
                pixel_y = right_panel_rect.top + grid_y * GRID_CELL_SIZE
                pixel_width = width * GRID_CELL_SIZE
                pixel_height = height * GRID_CELL_SIZE
                
                # –°–æ–∑–¥–∞–µ–º –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å —Å –∞–ª—å—Ñ–∞-–∫–∞–Ω–∞–ª–æ–º –¥–ª—è –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
                preview_surface = pygame.Surface((pixel_width, pixel_height), pygame.SRCALPHA)
                preview_surface.fill(TOWN_HALL_PREVIEW_COLOR)
                screen.blit(preview_surface, (pixel_x, pixel_y))
                
                # –û–±–≤–æ–¥–∫–∞ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
                pygame.draw.rect(screen, (255, 255, 255, 180), (pixel_x, pixel_y, pixel_width, pixel_height), 2)

def draw_building_buttons():
    """–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫ –ø–æ—Å—Ç—Ä–æ–µ–∫ –≤ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏"""
    title_text = font.render("–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ—Å—Ç—Ä–æ–π–∫–∏:", True, (255, 255, 255))
    screen.blit(title_text, (20, 50))
    
    for building_name, button_rect in building_buttons.items():
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–≤–µ—Ç –∫–Ω–æ–ø–∫–∏
        mouse_pos = pygame.mouse.get_pos()
        if button_rect.collidepoint(mouse_pos):
            color = BUTTON_HOVER_COLOR
        else:
            color = BUTTON_COLOR
        
        # –†–∏—Å—É–µ–º –∫–Ω–æ–ø–∫—É
        pygame.draw.rect(screen, color, button_rect, border_radius=8)
        pygame.draw.rect(screen, DIVIDER_COLOR, button_rect, 2, border_radius=8)
        
        # –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
        if building_name == "town_hall":
            cost = BUILDING_COSTS["town_hall"]
            button_text = font.render("–†–∞—Ç—É—à–∞", True, (255, 255, 255))
            cost_text = small_font.render(f"üí∞{cost['gold']} üß™{cost['potions']}", True, (200, 200, 200))
            size_text = small_font.render(f"–†–∞–∑–º–µ—Ä: 3x2 –∫–ª–µ—Ç–∫–∏", True, (180, 180, 180))
            
            screen.blit(button_text, (button_rect.x + 20, button_rect.y + 10))
            screen.blit(cost_text, (button_rect.x + 20, button_rect.y + 35))
            screen.blit(size_text, (button_rect.x + 150, button_rect.y + 35))

def draw_resources():
    """–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–µ—Å—É—Ä—Å–∞—Ö –Ω–∞ –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏"""
    # –°–æ–∑–¥–∞–µ–º —Ç–µ–∫—Å—Ç—ã —Å –∏–∫–æ–Ω–∫–∞–º–∏
    gold_text = font.render(f"üí∞ –ó–æ–ª–æ—Ç–æ: {gold}", True, GOLD_COLOR)
    potion_text = font.render(f"üß™ –ó–µ–ª—å—è: {potions}", True, POTION_COLOR)
    population_text = font.render(f"üë• –ñ–∏—Ç–µ–ª–∏: {population}", True, POPULATION_COLOR)
    level_text = font.render(f"üè† –£—Ä–æ–≤–µ–Ω—å: {village_level}", True, LEVEL_COLOR)
    
    # –†–∞—Å–ø–æ–ª–∞–≥–∞–µ–º —Ç–µ–∫—Å—Ç—ã —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –ø–æ –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏
    spacing = SCREEN_WIDTH // 5
    
    screen.blit(gold_text, (spacing * 1 - 100, REMAINING_HEIGHT + 15))
    screen.blit(potion_text, (spacing * 2 - 100, REMAINING_HEIGHT + 15))
    screen.blit(population_text, (spacing * 3 - 100, REMAINING_HEIGHT + 15))
    screen.blit(level_text, (spacing * 4 - 100, REMAINING_HEIGHT + 15))

def can_afford_building(building_name):
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Ö–≤–∞—Ç–∞–µ—Ç –ª–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–π–∫–∏"""
    cost = BUILDING_COSTS[building_name]
    return gold >= cost["gold"] and potions >= cost["potions"]

def build_building(building_name, grid_x, grid_y):
    """–°—Ç—Ä–æ–∏—Ç –∑–¥–∞–Ω–∏–µ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö —Å–µ—Ç–∫–∏"""
    global gold, potions
    
    if can_afford_building(building_name):
        cost = BUILDING_COSTS[building_name]
        gold -= cost["gold"]
        potions -= cost["potions"]
        
        buildings.append((building_name, grid_x, grid_y))
        return True
    return False

def draw_interface():
    """–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å —Ç—Ä–µ–º—è –æ–±–ª–∞—Å—Ç—è–º–∏"""
    # –û—á–∏—Å—Ç–∫–∞ —ç–∫—Ä–∞–Ω–∞
    screen.fill(BACKGROUND)
    
    # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø–∞–Ω–µ–ª–µ–π
    pygame.draw.rect(screen, LEFT_PANEL_COLOR, left_panel_rect)
    pygame.draw.rect(screen, RIGHT_PANEL_COLOR, right_panel_rect)
    pygame.draw.rect(screen, BOTTOM_BAR_COLOR, bottom_bar_rect)
    
    # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–µ—Ç–∫–∏ –≤ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏
    draw_grid(screen, right_panel_rect, GRID_CELL_SIZE, GRID_COLOR)
    
    # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–∫
    draw_buildings()
    
    # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫ –ø–æ—Å—Ç—Ä–æ–µ–∫
    draw_building_buttons()
    
    # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–¥–∞–Ω–∏—è
    draw_building_preview(pygame.mouse.get_pos())
    
    # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π
    pygame.draw.line(screen, DIVIDER_COLOR, 
                    (LEFT_PANEL_WIDTH, 0), 
                    (LEFT_PANEL_WIDTH, REMAINING_HEIGHT), 3)
    pygame.draw.line(screen, DIVIDER_COLOR, 
                    (0, REMAINING_HEIGHT), 
                    (SCREEN_WIDTH, REMAINING_HEIGHT), 3)
    
    # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏
    draw_resources()

def main():
    """–ì–ª–∞–≤–Ω—ã–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª"""
    clock = pygame.time.Clock()
    running = True
    global selected_building
    
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False
            elif event.type == pygame.KEYDOWN:
                if event.key == pygame.K_ESCAPE:
                    selected_building = None  # –û—Ç–º–µ–Ω–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞
                elif event.key == pygame.K_PLUS or event.key == pygame.K_EQUALS:
                    global GRID_CELL_SIZE
                    GRID_CELL_SIZE = min(100, GRID_CELL_SIZE + 5)
                elif event.key == pygame.K_MINUS:
                    GRID_CELL_SIZE = max(10, GRID_CELL_SIZE - 5)
                # –¢–µ—Å—Ç–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
                elif event.key == pygame.K_g:
                    global gold
                    gold += 100
                elif event.key == pygame.K_p:
                    global potions
                    potions += 1
                elif event.key == pygame.K_h:
                    global population
                    population += 1
                elif event.key == pygame.K_l:
                    global village_level
                    village_level += 1
            
            elif event.type == pygame.MOUSEBUTTONDOWN:
                mouse_pos = pygame.mouse.get_pos()
                
                # –ö–ª–∏–∫ –≤ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ - –≤—ã–±–æ—Ä –∑–¥–∞–Ω–∏—è
                if left_panel_rect.collidepoint(mouse_pos):
                    for building_name, button_rect in building_buttons.items():
                        if button_rect.collidepoint(mouse_pos) and can_afford_building(building_name):
                            selected_building = building_name
                
                # –ö–ª–∏–∫ –≤ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏ - —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ
                elif (right_panel_rect.collidepoint(mouse_pos) and selected_building):
                    grid_x = (mouse_pos[0] - right_panel_rect.left) // GRID_CELL_SIZE
                    grid_y = (mouse_pos[1] - right_panel_rect.top) // GRID_CELL_SIZE
                    
                    width, height = BUILDING_SIZES[selected_building]
                    
                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–¥–∞–Ω–∏–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è
                    if (grid_x + width <= (right_panel_rect.width // GRID_CELL_SIZE) and
                        grid_y + height <= (right_panel_rect.height // GRID_CELL_SIZE)):
                        
                        if build_building(selected_building, grid_x, grid_y):
                            selected_building = None  # –°–±—Ä–æ—Å –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø–æ—Å—Ç—Ä–æ–π–∫–∏
        
        # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        draw_interface()
        
        # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ—Ç–∫–µ
        grid_info = font.render(f"–†–∞–∑–º–µ—Ä –∫–ª–µ—Ç–∫–∏: {GRID_CELL_SIZE}px", True, (200, 200, 200))
        help_text = small_font.render("–¢–µ—Å—Ç: G-–∑–æ–ª–æ—Ç–æ, P-–∑–µ–ª—å—è, H-–∂–∏—Ç–µ–ª–∏, L-—É—Ä–æ–≤–µ–Ω—å, ESC-–æ—Ç–º–µ–Ω–∞", True, (150, 150, 150))
        
        screen.blit(grid_info, (LEFT_PANEL_WIDTH + 50, 70))
        screen.blit(help_text, (LEFT_PANEL_WIDTH + 50, 110))
        
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞
        pygame.display.flip()
        clock.tick(60)  # 60 FPS
    
    pygame.quit()
    sys.exit()

if __name__ == "__main__":
    main()

–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
üèóÔ∏è –°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞:
–õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –ö–Ω–æ–ø–∫–∞ "–†–∞—Ç—É—à–∞" —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ —Ä–∞–∑–º–µ—Ä–µ
–í—ã–±–æ—Ä –∑–¥–∞–Ω–∏—è: –ö–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É –≤ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏
–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä: –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Ä–∞—Ç—É—à–∞ —Å–ª–µ–¥—É–µ—Ç –∑–∞ –∫—É—Ä—Å–æ—Ä–æ–º –≤ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏
–†–∞–∑–º–µ—â–µ–Ω–∏–µ: –ö–ª–∏–∫ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Ç—É—à–∏ —Ä–∞–∑–º–µ—Ä–æ–º 3x2 –∫–ª–µ—Ç–∫–∏

üìê –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ä–∞—Ç—É—à–∏:
–†–∞–∑–º–µ—Ä: 3x2 –∫–ª–µ—Ç–∫–∏ (6 –∫–ª–µ—Ç–æ–∫ –≤—Å–µ–≥–æ)
–¶–≤–µ—Ç: –ë–ª–µ–¥–Ω–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π
–°—Ç–æ–∏–º–æ—Å—Ç—å: 500 –∑–æ–ª–æ—Ç–∞ + 2 –∑–µ–ª—å—è

üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
–ö–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É –≤ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ - –≤—ã–±–æ—Ä —Ä–∞—Ç—É—à–∏
–ö–ª–∏–∫ –Ω–∞ —Å–µ—Ç–∫—É - –ø–æ—Å—Ç—Ä–æ–π–∫–∞ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –º–µ—Å—Ç–µ
ESC - –æ—Ç–º–µ–Ω–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞
G/P/H/L - —Ç–µ—Å—Ç–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

üìä –£–ª—É—á—à–µ–Ω–Ω–∞—è –Ω–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å:
–í—ã—Å–æ—Ç–∞ 90 –ø–∏–∫—Å–µ–ª–µ–π –≤–º–µ—Å—Ç–æ 30
–ö—Ä—É–ø–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–∂–∏–º–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞
–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å —Ä–∞—Ç—É—à–∏ –Ω–∞ —Å–µ—Ç–∫–µ, –≤—ã–±–∏—Ä–∞—è –º–µ—Å—Ç–æ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—è –ø–æ—Å—Ç—Ä–æ–π–∫—É!